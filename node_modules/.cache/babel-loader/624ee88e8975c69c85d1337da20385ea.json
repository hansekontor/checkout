{"ast":null,"code":"/*!\n * lines.js - line reader for bcrypto\n * Copyright (c) 2018-2019, Christopher Jeffrey (MIT License).\n * https://github.com/bcoin-org/bcrypto\n */\n\n/* eslint spaced-comment: \"off\" */\n'use strict';\n\nconst assert = require('../internal/assert');\n/*\n * Lines\n */\n\n\nfunction* lines(str) {\n  assert(typeof str === 'string');\n  let i = 0;\n  let j = 0;\n  let n = 0;\n\n  if (str.length > 0) {\n    if (str.charCodeAt(0) === 0xfeff) {\n      i += 1;\n      j += 1;\n    }\n  }\n\n  for (; i < str.length; i++) {\n    const ch = str.charCodeAt(i);\n\n    switch (ch) {\n      case 0x0d\n      /*'\\r'*/\n      :\n      case 0x0a\n      /*'\\n'*/\n      :\n      case 0x85\n      /*NEL*/\n      :\n        {\n          if (j !== i) {\n            const line = trimSpace(str.substring(j, i));\n            if (line.length > 0) yield [n, line];\n          }\n\n          if (ch === 0x0d && i + 1 < str.length) {\n            if (str.charCodeAt(i + 1) === 0x0a) i += 1;\n          }\n\n          j = i + 1;\n          n += 1;\n          break;\n        }\n    }\n  }\n\n  if (j !== i) {\n    const line = trimSpace(str.substring(j, i));\n    if (line.length > 0) yield [n, line];\n  }\n}\n/*\n * Helpers\n */\n\n\nfunction trimSpace(str) {\n  assert(typeof str === 'string');\n\n  for (let i = str.length - 1; i >= 0; i--) {\n    const ch = str.charCodeAt(i);\n\n    switch (ch) {\n      case 0x09\n      /*'\\t'*/\n      :\n      case 0x0b\n      /*'\\v'*/\n      :\n      case 0x0c\n      /*'\\f'*/\n      :\n      case 0x20\n      /*' '*/\n      :\n      case 0xa0\n      /*nbsp*/\n      :\n        continue;\n    }\n\n    return str.substring(0, i + 1);\n  }\n\n  return str;\n}\n/*\n * Expose\n */\n\n\nmodule.exports = lines;","map":null,"metadata":{},"sourceType":"script"}